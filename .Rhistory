for(i in id) {
data <- rbind(data, read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep=""))))
}
data
View(data)
selection <- subset(complete(directory, id), nobs > threshold)
corr = numeric(0)
data <- NA
for(i in id) {
data <- rbind(data, read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep=""))))
corr(data, na.rm = TRUE)
}
selection <- subset(complete(directory, id), nobs > threshold)
corr = numeric(0)
data <- NA
for(i in id) {
data <- rbind(data, read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep=""))))
corr <- cor(data, na.rm = TRUE)
}
data
id
selection
for(i in selection) {
data <- rbind(data, read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep=""))))
corr <- cor(data, na.rm = TRUE)
}
for(i in selection[i]) {
data <- rbind(data, read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep=""))))
corr <- cor(data, na.rm = TRUE)
}
names(selection)
for(i in selection[[i]]) {
data <- rbind(data, read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep=""))))
corr <- cor(data, na.rm = TRUE)
}
for(i in selection$i) {
data <- rbind(data, read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep=""))))
corr <- cor(data, na.rm = TRUE)
}
data <- read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep="")))
data
selection
selection <- subset(complete(directory, id), nobs > threshold)
corr = numeric(0)
data <- NA
for(i in selection) {
data <- read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep="")))
corr <- cor(data, na.rm = TRUE)
}
selection <- subset(complete(directory, id), nobs > threshold)
corr = numeric(0)
data <- NA
for(selection$i in id) {
data <- read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep="")))
corr <- cor(data, na.rm = TRUE)
}
selection <- subset(complete(directory, id), nobs > threshold)
corr = numeric(0)
data <- NA
for(selection[i] in id) {
data <- read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep="")))
corr <- cor(data, na.rm = TRUE)
}
selection <- subset(complete(directory, id), nobs > threshold)
corr = numeric(0)
data <- NA
for(selection in id) {
data <- read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep="")))
corr <- cor(data, na.rm = TRUE)
}
set.seed(42)
dflist <- vector( "list", 5 )
for( i in 1:5 ){
dflist[[i]] <- data.frame( A = rnorm(100), B = rnorm(100), C = rnorm(100) )
}
varlist <- c("A", "B")
lapply( dflist, function(x){ colMeans(x[varlist]) } )
?colMeans
?colcor
??colcor
?cor
read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep="")))
i
selection <- subset(complete(directory, id), nobs > threshold)
corr = numeric(0)
data <- NA
complete <- function(directory, id = 1:332) {
x = numeric(0)
nobs = numeric(0)
for(i in id) {
nobs <- sum(complete.cases(read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep="")))))
x <- rbind(x, data.frame(i, nobs))
}
x
}
selection <- subset(complete(directory, id), nobs > threshold)
corr = numeric(0)
data <- NA
id <- 1:3
selection <- subset(complete(directory, id), nobs > threshold)
corr = numeric(0)
data <- NA
selection <- subset(complete(directory, id), nobs > threshold)
corr = numeric(0)
data <- NA
threshold <- 150
selection <- subset(complete(directory, id), nobs > threshold)
corr = numeric(0)
data <- NA
directpry <- "specdata"
selection <- subset(complete(directory, id), nobs > threshold)
corr = numeric(0)
data <- NA
directory <- "specdata"
selection <- subset(complete(directory, id), nobs > threshold)
corr = numeric(0)
data <- NA
read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep="")))
read.csv(file.path(directory, paste(sprintf("%03d", id), ".csv", sep="")))
read.csv(file.path(directory, paste(sprintf("%03d", 2), ".csv", sep="")))
avector <- as.vector(aframe['a2'])
class(avector)
avector <- aframe[['a2']]
class(avector)
avector <- aframe[,2]
class(avector)
?as.vector
?aframe
a1 = c(1, 2, 3, 4, 5)
a2 = c(6, 7, 8, 9, 10)
a3 = c(11, 12, 13, 14, 15)
aframe = data.frame(a1, a2, a3)
avector <- as.vector(aframe['a2'])
class(avector)
avector <- aframe[['a2']]
class(avector)
avector <- aframe[,2]
class(avector)
selection <- subset(complete(directory, id), nobs > threshold)
avector <- selection[,1]
avector
avector <- subset(complete(directory, id), nobs > threshold)[,1]
avector
for(i in avector) {
data <- rbind(data, read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep=""))))
}
data
selection <- subset(complete(directory, id), nobs > threshold)
avector <- subset(complete(directory, id), nobs > threshold)[,1]
corr = numeric(0)
data <- NA
for(i in avector) {
data <- rbind(data, read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep=""))))
corr <- cor(data, na.rm = TRUE)
}
selection <- subset(complete(directory, id), nobs > threshold)
avector <- subset(complete(directory, id), nobs > threshold)[,1]
corr = numeric(0)
data <- NA
for(i in avector) {
data <- rbind(data, read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep=""))))
corr <- cor(data)
}
?cor
data
avector <- subset(complete(directory, id), nobs > threshold)[,1]
corr = numeric(0)
data <- NA
for(i in avector) {
data <- read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep="")))
corr <- cor(data)
}
avector <- subset(complete(directory, id), nobs > threshold)[,1]
corr = numeric(0)
data = numeric(0)
for(i in avector) {
data <- read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep="")))
corr <- cor(data)
}
set.seed(10)
x = as.data.frame(matrix(rnorm(100), ncol = 10))
x$L1 = letters[1:10]
x$L2 = letters[11:20]
cor(x)
set.seed(10)
x = as.data.frame(matrix(rnorm(100), ncol = 10))
x$L1 = letters[1:10]
x$L2 = letters[11:20]
cor(x[sapply(x, is.numeric)])
avector <- subset(complete(directory, id), nobs > threshold)[,1]
corr = numeric(0)
data = numeric(0)
for(i in avector) {
data <- read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep="")))
corr <- cor(data[sapply(data, is.numeric)])
}
avector <- subset(complete(directory, id), nobs > threshold)[,1]
corr = numeric(0)
data = numeric(0)
for(i in avector) {
data <- read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep="")))
sul <- data$sulfate
}
avector <- subset(complete(directory, id), nobs > threshold)[,1]
corr = numeric(0)
data = numeric(0)
for(i in avector) {
data <- read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep="")))
sul <- data$sulfate
nit <- data$nitrate
}
avector <- subset(complete(directory, id), nobs > threshold)[,1]
corr = numeric(0)
data = numeric(0)
for(i in avector) {
data <- read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep="")))
sul <- data$sulfate
nit <- data$nitrate
corr <- cor(sul, nit)
}
corr
avector <- subset(complete(directory, id), nobs > threshold)[,1]
corr = numeric(0)
data = numeric(0)
for(i in avector) {
data <- read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep="")))
sul <- data$sulfate
nit <- data$nitrate
corr <- cor(sul, nit, na.rm=TRUE)
}
avector <- subset(complete(directory, id), nobs > threshold)[,1]
corr = numeric(0)
data = numeric(0)
for(i in avector) {
data <- read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep="")))
sul <- data$sulfate
nit <- data$nitrate
corr <- cor(sul, nit, use="complete.obs")
}
corr
avector
threshold <- 300
avector <- subset(complete(directory, id), nobs > threshold)[,1]
corr = numeric(0)
data = numeric(0)
for(i in avector) {
data <- read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep="")))
sul <- data$sulfate
nit <- data$nitrate
corr <- cor(sul, nit, use="complete.obs")
}
corr
avector
avector <- subset(complete(directory, id), nobs > threshold)[,1]
corr = numeric(0)
data = numeric(0)
for(i in avector) {
data <- read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep="")))
sul <- data$sulfate
nit <- data$nitrate
corr <- rbind(corr, cor(sul, nit, use="complete.obs"))
}
corr
threshold <-150
avector <- subset(complete(directory, id), nobs > threshold)[,1]
corr = numeric(0)
data = numeric(0)
for(i in avector) {
data <- read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep="")))
sul <- data$sulfate
nit <- data$nitrate
corr <- rbind(corr, cor(sul, nit, use="complete.obs"))
}
corr
avector <- subset(complete(directory, id), nobs > threshold)[,1]
corr = numeric(0)
data = numeric(0)
for(i in avector) {
data <- read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep="")))
sul <- data$sulfate
nit <- data$nitrate
corr <- cbind(corr, cor(sul, nit, use="complete.obs"))
}
corr
corr
complete <- function(directory, id = 1:332) {
x = numeric(0)
nobs = numeric(0)
for(i in id) {
nobs <- sum(complete.cases(read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep="")))))
x <- rbind(x, data.frame(i, nobs))
}
x
}
source("corr.R")
source("complete.R")
cr <- corr("specdata", 150)
head(cr)
corr <- function(directory, threshold = 0) {
avector <- subset(complete(directory, 1:332), nobs > threshold)[,1]
corr = numeric(0)
data = numeric(0)
for(i in avector) {
data <- read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep="")))
sul <- data$sulfate
nit <- data$nitrate
correlation <- cbind(correlation, cor(sul, nit, use="complete.obs"))
}
correlation
}
cr <- corr("specdata", 150)
head(cr)
corr <- function(directory, threshold = 0) {
avector <- subset(complete(directory, 1:332), nobs > threshold)[,1]
correlation = numeric(0)
data = numeric(0)
for(i in avector) {
data <- read.csv(file.path(directory, paste(sprintf("%03d", i), ".csv", sep="")))
sul <- data$sulfate
nit <- data$nitrate
correlation <- cbind(correlation, cor(sul, nit, use="complete.obs"))
}
correlation
}
cr <- corr("specdata", 150)
head(cr)
?head
head(6)
headcr
head(cr)
summary(cr)
cr <- corr("specdata", 400)
head(cr)
GDPurl <- "https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2FGDP.csv"
GDP <- data.table(read.csv("GDP.csv", skip=4, nrows=215))
setnames(dtGDP, c("X", "X.1", "X.3", "X.4"), c("CountryCode", "rankingGDP", "Long.Name", "gdp"))
Eduurl <- "https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2FEDSTATS_Country.csv"
Edu <- data.table <-(read.csv(Eduurl))
install.packages("data.table")
library(data.table)
## install packages
install.packages("sqldf")
library(sqldf)
install.packages("plyr")
library(plyr)
install.packages("dplyr")
library(dplyr)
## set directory for the column names, read the column names and activity names.
name_dir <- ""
names <- read.csv(paste(getwd(), name_dir, "features.txt", sep=""), sep="", header=FALSE, col.names=c("Id", "Measurement"))
Act <- read.csv(paste(getwd(), name_dir, "activity_labels.txt", sep=""), sep="", header=FALSE, col.names=c("Id", "Activity"))
## set the directory for the test data, read in the test data, subject test data and activity test data.
## combine the columns for the test data set.
test_dir <- "/test/"
X_test <- read.csv(paste(getwd(), test_dir, "X_test.txt", sep=""), sep="", header=FALSE, col.names=names$Measurement)
subject_test <- read.csv(paste(getwd(), test_dir, "subject_test.txt", sep=""), sep="", header=FALSE, col.names="Subject")
Y_test <- read.csv(paste(getwd(), test_dir, "y_test.txt", sep=""), sep="", header=FALSE, col.names="Activity")
test_data <- cbind(subject_test, Y_test, X_test)
## set the directory for the train data, read in the train data, subject train data and activity train data.
## combine the columns for the train data set
train_dir <- "/train/"
X_train <- read.csv(paste(getwd(), train_dir, "X_train.txt", sep=""), sep="", header=FALSE, col.names=names$Measurement)
subject_train <- read.csv(paste(getwd(), train_dir, "subject_train.txt", sep=""), sep="", header=FALSE, col.names="Subject")
Y_train <- read.csv(paste(getwd(), train_dir, "y_train.txt", sep=""), sep="", header=FALSE, col.names="Activity")
train_data <- cbind(subject_train, Y_train, X_train)
#combine the test and trainings data set
data <- rbind(test_data, train_data)
## replace the activity number to a descriptive word
data_activity <- sqldf("SELECT Act.Activity as Activity FROM data INNER JOIN Act ON data.Activity= Act.Id")
## select the columns with the keyword mean and with the keyword std
data_mean <- select(data, contains("mean", ignore.case=TRUE))
data_std <- select(data, contains("std", ignore.case=TRUE))
## combine the columns and rename the subject column
new <- cbind(data$Subject, data_activity, data_mean, data_std)
new <- rename(new, replace=c("data$Subject" = "Subject"))
## create the tidy data set
tidy <- ddply(new, .(Subject, Activity), numcolwise(mean))
install.packages("PivotalR")
library(PivotalR)
+makeCacheMatrix <- function(cur_matrix = matrix()) {
+  inverse <- NULL
+  set <- function(new_matrix) {
+    cur_matrix <<- new_matrix
+    inverse <<- NULL
+  }
+  get <- function() cur_matrix
+  set_inverse <- function(new_inverse) inverse <<- new_inverse
+  get_inverse <- function() inverse
+  list(set = set, get = get,
+       set_inverse = set_inverse,
+       get_inverse = get_inverse)
}
-makeCacheMatrix <- function(x = matrix()) {
+## this script defines two functions used to cache the inverse of a matrices
+## makeCacheMatrix(cur_matrix) generates a list of functions to read and write a matrix and its inverse
+## cacheSolve(cacheMatrix) returns the inverse of such a cacheMatrix, using a cached result if the inverse has been calculated earlier
+## makeCacheMatrix(cur_matrix): returns a matrix object in the form of a list of functions [get(), set(new_matrix), set_inverse(new_inverse), get_inverse()]
+## "cur_matrix" is current value of the matrix (initially given by the parameter cur_matrix), and the variable "inverse" is used to store the inverse of cur_matrix (or NULL if the inverse has not been calculated yet)
+## the get() and get_inverse() commands are used to read the value of the matrix and its inverse
+## the set(new_matrix) and set_inverse(new_inverse) commands are used to set the value of the matrix and its inverse
+makeCacheMatrix <- function(cur_matrix = matrix()) {
+  inverse <- NULL
+  set <- function(new_matrix) {
+    cur_matrix <<- new_matrix
+    inverse <<- NULL
+  }
+  get <- function() cur_matrix
+  set_inverse <- function(new_inverse) inverse <<- new_inverse
+  get_inverse <- function() inverse
+  list(set = set, get = get,
+       set_inverse = set_inverse,
+       get_inverse = get_inverse)
}
## this script defines two functions used to cache the inverse of a matrices
## makeCacheMatrix(cur_matrix) generates a list of functions to read and write a matrix and its inverse
## cacheSolve(cacheMatrix) returns the inverse of such a cacheMatrix, using a cached result if the inverse has been calculated earlier
## makeCacheMatrix(cur_matrix): returns a matrix object in the form of a list of functions [get(), set(new_matrix), set_inverse(new_inverse), get_inverse()]
## "cur_matrix" is current value of the matrix (initially given by the parameter cur_matrix), and the variable "inverse" is used to store the inverse of cur_matrix (or NULL if the inverse has not been calculated yet)
## the get() and get_inverse() commands are used to read the value of the matrix and its inverse
## the set(new_matrix) and set_inverse(new_inverse) commands are used to set the value of the matrix and its inverse
makeCacheMatrix <- function(cur_matrix = matrix()) {
inverse <- NULL
set <- function(new_matrix) {
cur_matrix <<- new_matrix
inverse <<- NULL
}
get <- function() cur_matrix
set_inverse <- function(new_inverse) inverse <<- new_inverse
get_inverse <- function() inverse
list(set = set, get = get,
set_inverse = set_inverse,
get_inverse = get_inverse)
}
## cacheSolve(cacheMatrix): returns the inverse of cacheMatrix, where cacheMatrix is a list as given by makeCacheMatrix
## if the inverse of cacheMatrix has been calculated earlier, the earlier result is re-used
cacheSolve <- function(cacheMatrix) {
inverse <- cacheMatrix$get_inverse()
if(!is.null(inverse)) {
message("getting cached data")
return(inverse)
}
inverse <- solve( cacheMatrix$get() )
cacheMatrix$set_inverse(inverse)
inverse
}
makeCacheMatrix <- function(x = matrix()) {
inv <- NULL
args <- NULL
function(...) {
if (is.null(inv) || !identical(list(...), args)) {
# message("solving...")  ## uncomment to demonstrate caching
inv <<- solve(x, ...)
args <<- list(...)
}
inv
}
}
makeCacheMatrix <- function(x = matrix()) {
inv <- NULL
args <- NULL
function(...) {
if (is.null(inv) || !identical(list(...), args)) {
# message("solving...")  ## uncomment to demonstrate caching
inv <<- solve(x, ...)
args <<- list(...)
}
inv
}
}
cacheSolve <- function(x, ...) {
x(...)
}
makeCacheMatrix <- function(x = matrix()) {
inv <- NULL
args <- NULL
function(...) {
if (is.null(inv) || !identical(list(...), args)) {
# message("solving...")  ## uncomment to demonstrate caching
inv <<- solve(x, ...)
args <<- list(...)
}
inv
}
}
makeCacheMatrix
makeCacheMatrix()
makeCacheMatrix([2])
makeCacheMatrix(x=2)
makeCacheMatrix <- function(x = matrix()) {
inv <- NULL
args <- NULL
function(...) {
if (is.null(inv) || !identical(list(...), args)) {
# message("solving...")  ## uncomment to demonstrate caching
inv <<- solve(x, ...)
args <<- list(...)
}
inv
}
}
makeCacheMatrix(x = 2)
makeCacheMatrix(2)
install.packages("knitr")
library(knitr)
knit2html("PA1_template.Rmd")
setwd("D/R/Lesson5")
getwd()
setwd("D/R/Lesson5")
setwd("D:/R/Lesson5")
install.packages("knitr")
library(knitr)
knit2html("PA1_template.Rmd")
